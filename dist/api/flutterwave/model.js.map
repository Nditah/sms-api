{"version":3,"sources":["../../../src/api/flutterwave/model.js"],"names":["Schema","mongoose","ObjectId","Types","schemaCreate","flwId","Joi","number","optional","txRef","string","flwRef","orderRef","paymentPlan","flwCreatedAt","date","amount","charged_amount","status","IP","currency","customer","object","entity","created_by","pushable","boolean","pullable","schemaUpdate","updated_by","required","schema","type","Number","String","Date","id","phone","fullName","customertoken","email","createdAt","updatedAt","deletedAt","AccountId","account_number","first_name","last_name","card6","card_last4","ref","deleted","Boolean","deleted_at","deleted_by","default","options","DATABASE","OPTIONS","newSchema","set","Flutterwave","model"],"mappings":"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","file":"model.js","sourcesContent":["/**\n * @author 4Dcoder\n * @property {Number} flwId Flutterwave flwId // 125837,\n * @property {String} txRef Flutterwave txRef // \"rave-pos-272519815315\",\n * @property {String} flwRef Flutterwave flwRef // \"FLWACHMOCK-1523118279396\",\n * @property {String} orderRef Flutterwave orderRef // \"URF_1523118277202_7343035\",\n * @property {String} paymentPlan Flutterwave paymentPlan // null,\n * @property {Date} flwCreatedAt Flutterwave flwCreatedAt // \"2018-04-07T16:24:37.000Z\",\n * @property {Number} amount Flutterwave amount // 200,\n * @property {Number} charged_amount Flutterwave charged_amount // 200,\n * @property {String} status Flutterwave status // \"successful\",\n * @property {String} IP Flutterwave IP // \"197.149.95.62\",\n * @property {String} currency Flutterwave currency // \"NGN\",\n * @property {Object} customer Flutterwave customer Object {\n *      {Number} id customer id // 5766,\n *      {String} phone customer phone , // \"N/A\",\n *      {String} fullName customer phone , // \"Anonymous customer\",\n *      {String} customertoken customer phone , // null,\n *      {String} email customer phone , // \"salesmode@ravepay.co\",\n *      {Date} createdAt customer phone , // \"2017-10-16T10:03:19.000Z\",\n *      {Date} updatedAt customer phone , // \"2017-10-16T10:03:19.000Z\",\n *      {Date} deletedAt customer phone , // null,\n *      {Number} AccountId customer phone , // 134,\n *      },\n * @property {Object} entity Flutterwave entity Object {\n *      {String} account_number entity , // \"0690000037\",\n *      {String} first_name entity , // \"Dele Moruf\",\n *      {String} last_name entity , // \"Quadri\",\n *      {String} card6 entity , // \"539983\",\n *      {String} card_last4 entity , // \"8381\",\n *      },\n * @description Flutterwave model holds record of all transactions through 3rd party\n * payment gateway like InterSwitch, Flutterwave, Paystack, Paypal. It mainly has the\n * webhook for flutterwave payment for now.\n */\nimport Joi from \"@hapi/joi\";\nimport mongoose from \"mongoose\";\n// eslint-disable-next-line camelcase\nimport { DATABASE } from \"../../constants\";\nimport User from \"../user/model\";\n\nconst { Schema } = mongoose;\nconst { ObjectId } = Schema.Types;\n\nexport const schemaCreate = {\n    flwId: Joi.number().optional(),\n    txRef: Joi.string().optional(),\n    flwRef: Joi.string().optional(),\n    orderRef: Joi.string().optional(),\n    paymentPlan: Joi.string().optional(),\n    flwCreatedAt: Joi.date().optional(),\n    amount: Joi.number().optional(),\n    charged_amount: Joi.number().optional(),\n    status: Joi.string().optional(),\n    IP: Joi.string().optional(),\n    currency: Joi.string().optional(),\n    customer: Joi.object().optional(),\n    entity: Joi.object().optional(),\n    created_by: Joi.string().optional(),\n    pushable: Joi.boolean().optional(),\n    pullable: Joi.boolean().optional(),\n};\n\nexport const schemaUpdate = {\n    flwId: Joi.number().optional(),\n    txRef: Joi.string().optional(),\n    flwRef: Joi.string().optional(),\n    orderRef: Joi.string().optional(),\n    paymentPlan: Joi.string().optional(),\n    flwCreatedAt: Joi.date().optional(),\n    amount: Joi.number().optional(),\n    charged_amount: Joi.number().optional(),\n    status: Joi.string().optional(),\n    IP: Joi.string().optional(),\n    currency: Joi.string().optional(),\n    customer: Joi.object().optional(),\n    entity: Joi.object().optional(),\n    updated_by: Joi.string().required(),\n    pushable: Joi.boolean().optional(),\n    pullable: Joi.boolean().optional(),\n};\n\nexport const schema = {\n    flwId: { type: Number }, // 125837,\n    txRef: { type: String }, // \"rave-pos-272519815315\",\n    flwRef: { type: String }, // \"FLWACHMOCK-1523118279396\",\n    orderRef: { type: String }, // \"URF_1523118277202_7343035\",\n    paymentPlan: { type: String }, // null,\n    flwCreatedAt: { type: Date }, // \"2018-04-07T16:24:37.000Z\",\n    amount: { type: Number }, // 200,\n    charged_amount: { type: Number }, // 200,\n    status: { type: String }, // \"successful\",\n    IP: { type: String }, // \"197.149.95.62\",\n    currency: { type: String }, // \"NGN\",\n    customer: {\n        id: { type: Number }, // 5766,\n        phone: { type: String }, // \"N/A\",\n        fullName: { type: String }, // \"Anonymous customer\",\n        customertoken: { type: String }, // null,\n        email: { type: String }, // \"salesmode@ravepay.co\",\n        createdAt: { type: Date }, // \"2017-10-16T10:03:19.000Z\",\n        updatedAt: { type: Date }, // \"2017-10-16T10:03:19.000Z\",\n        deletedAt: { type: Date }, // null,\n        AccountId: { type: Number }, // 134,\n    },\n    entity: {\n        account_number: { type: String }, // \"0690000037\",\n        first_name: { type: String }, // \"Dele Moruf\",\n        last_name: { type: String }, // \"Quadri\",\n        card6: { type: String }, // \"539983\",\n        card_last4: { type: String }, // \"8381\",\n    },\n    created_by: { type: ObjectId },\n    updated_by: { type: ObjectId, ref: \"Staff\" },\n    deleted: { type: Boolean },\n    deleted_at: { type: Date },\n    deleted_by: { type: ObjectId, ref: \"Staff\" },\n    pushable: { type: Boolean, default: false }, // Created Offline\n    pullable: { type: Boolean, default: false }, // Created Online\n};\n\nconst options = DATABASE.OPTIONS;\n\nconst newSchema = new Schema(schema, options);\nnewSchema.set(\"collection\", \"flutterwave\");\n\nconst Flutterwave = mongoose.model(\"Flutterwave\", newSchema);\n\nexport default Flutterwave;\n"]}